{
  "priority": 2,
  "scenarioName": "Locks",
  "request": {
    "method": "GET",
    "urlPathPattern": "/survey/api/survey/([a-zA-Z0-9/-]*)/locks",
    "headers": {
      "Authorization": {
        "matches": "Bearer ([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)"
      }
    }
  },
  "response": {
    "status": 200,
    "headers": {
      "Content-Type": "application/json"
    },
    "jsonBody": {
      "transactionLock": {
        "locked": true,
        "lockedId": "{{request.path.[3]}}",
        "lockedEntityId": 2100000,
        "sessionUser": "{{regexExtract request.headers.Authorization.[0] 'Bearer +[A-Za-z0-9-_=]+.([A-Za-z0-9-_=]+)' 'groups'}}{{#assign 'payload'}}{{base64 groups.[0] decode=true}}{{/assign}}{{jsonPath payload '$.id'}}",
        "type": null,
        "lockedBy": {
          "id": "{{regexExtract request.headers.Authorization.[0] 'Bearer +[A-Za-z0-9-_=]+.([A-Za-z0-9-_=]+)' 'groups'}}{{#assign 'payload'}}{{base64 groups.[0] decode=true}}{{/assign}}{{jsonPath payload '$.id'}}",
          "givenNames": "Survey B",
          "surname": "External"
        },
        "lockedAt": "{{now}}",
        "isNewAppLock": true
      },
      "taCertificationRequestLocks": []
    },
    "fixedDelayMilliseconds": 100
  }
}
